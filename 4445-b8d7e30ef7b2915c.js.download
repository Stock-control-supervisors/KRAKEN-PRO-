(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4445],{3234:function(e,n,t){"use strict";t.d(n,{H:function(){return ee}});var a=t(85893),l=t(67294),i=t(75808),s=t(11963),o=t(81927),r=t(88808),d=t(59112),c=t(89866),u=t(75438),v=t(74106),f=t(21779),m=t(72512),h=t(94907);let x=()=>{let e=(0,h.JL)(),{data:n}=(0,f.ie)(void 0,e),{data:t}=(0,f.Ff)(void 0,e),{nftAutoflow:a}=(0,h.Ay)(),i=n&&t&&(0,m.xm)({accountSettings:n,accountProfile:t}),s=(0,l.useCallback)(()=>!i||(a(),!1),[i,a]);return s};var p=t(27186),y=t(62325);let k=new y.vU([{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}]),g=(e,n,t)=>k.encodeFunctionData("transferFrom",[e,n,t]),b=new y.vU([{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}]),j=(e,n,t,a,l)=>b.encodeFunctionData("safeTransferFrom",[e,n,t,a,l]),C=new y.vU([{constant:!1,inputs:[{name:"to",type:"address"},{name:"punkIndex",type:"uint256"}],name:"transferPunk",outputs:[],payable:!1,type:"function"}]),N=(e,n)=>C.encodeFunctionData("transferPunk",[e,n]),_=new y.vU([{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}]),w=(e,n)=>_.encodeFunctionData("transfer",[e,n]),D=async(e,n,t)=>{var a,l,i;let s=null==t?void 0:t.token;if(!s||!("standard"in s))return;let o=null===(a=s.standard)||void 0===a?void 0:a.toUpperCase(),r=null!==(i=null==t?void 0:null===(l=t.token)||void 0===l?void 0:l.id)&&void 0!==i?i:"";switch(o){case"ERC-721":return g(e,n,r);case"CRYPTOKITTIES":return w(n,r);case"ERC-1155":return j(e,n,r,1,"0x");case"CRYPTOPUNKS":return N(n,r);default:return}};var T=t(62410),W=t(77172),S=t(59720),K=t(62036),E=t(12633);let A=e=>{var n,t,l;let{fee:i,isPending:s,isOpen:o=!1,nftAsset:r,onConfirm:c,onDismiss:u,depositAddress:v}=e;return(0,a.jsx)(K.L,{hasCloseButton:!0,onDismiss:u,isOpen:o,title:(0,a.jsx)(d.x,{langKey:"funding:transfer:Confirm"}),ariaLabel:"web3-deposit-dialog",children:s?(0,a.jsx)("div",{style:{width:40,height:40},className:"relative mv10 mh-auto",children:(0,a.jsx)(T.T,{size:"small",skinny:!0})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"caption-3 text-N200 mb1",children:(0,a.jsx)(d.x,{langKey:"nft:wallet:NftTransferDetails"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(W.c,{className:"pv1/2",label:(0,a.jsx)(d.x,{langKey:"nft:wallet:NftName"}),value:r.name}),(0,a.jsx)(W.c,{className:"pv1/2",label:(0,a.jsx)(d.x,{langKey:"nft:wallet:From"}),value:(0,a.jsx)(E.Ag,{canCopy:!0,chain:null==r?void 0:null===(n=r.token)||void 0===n?void 0:n.blockchain.id,className:"flex items-center",children:null==r?void 0:null===(t=r.token)||void 0===t?void 0:t.owner})}),(0,a.jsx)(W.c,{className:"pv1/2",label:(0,a.jsx)(d.x,{langKey:"nft:wallet:To"}),value:(0,a.jsx)(E.Ag,{canCopy:!0,chain:null==r?void 0:null===(l=r.token)||void 0===l?void 0:l.blockchain.id,className:"flex items-center",children:v})}),i&&(0,a.jsx)(W.c,{className:"pv1/2",label:(0,a.jsx)(d.x,{langKey:"nft:wallet:FeeAmount"}),value:i})]}),(0,a.jsx)(S.T,{buttonSize:"large",className:"mt6",confirmButtonText:(0,a.jsx)(d.x,{langKey:"general:Continue"}),onConfirm:c,cancelButtonText:(0,a.jsx)(d.x,{langKey:"general:Cancel"}),onCancel:u})]})})};var F=t(2758),I=t(94184),P=t.n(I),B=t(1922),L=t(92299),O=t(54558),H=t(41671),M=t.n(H);let X=e=>{var n;let{nftAsset:t,currentChainId:i,onDismiss:s,isOpen:o}=e,r=null==t?void 0:null===(n=t.token)||void 0===n?void 0:n.blockchain.id,{network:{[u.fX.Ethereum]:c}}=(0,m.Rh)(),v=(0,O.tf)(c),f=(0,O.hZ)(v),h=(0,l.useMemo)(()=>{if(r===u.fX.Ethereum){let e=Number(i).toString(10)===v.toString(10);return!!(o&&!e)}return!1},[r,i,v,o]);return(0,a.jsx)(K.L,{hasCloseButton:!0,onDismiss:s,isOpen:h,title:(0,a.jsx)(d.x,{langKey:"nft:wallet:web3ChainCheckDialog:modalTitle"}),ariaLabel:"web3-wallet-check-dialog",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:P()("flex justify-center relative",M().avatarHolder),children:(0,a.jsx)("div",{className:P()(M().avatar),children:r?(0,a.jsx)(L.m,{className:P()(M().crypton),asset:O.js[r],circle:!0,color:!0}):null})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("p",{className:P()("caption-2",M().title),children:(0,a.jsx)(B.cC,{i18nKey:"nft:wallet:web3ChainCheckDialog:title",values:{chainName:f}})})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("p",{className:P()("text-N300 text-center",M().content),children:(0,a.jsx)(B.cC,{i18nKey:"nft:wallet:web3ChainCheckDialog:description",values:{chainName:f}})})}),(0,a.jsx)("div",{children:(0,a.jsx)(S.T,{buttonSize:"large",className:"mt6",confirmButtonText:(0,a.jsx)(d.x,{langKey:"general:Okay"}),onConfirm:s})})]})})};var R=t(88517),U=t(87992),V=t(23883),z=t.n(V);let Z=e=>{var n,t,l,i;let{nftAsset:s,currentWeb3Address:o,onDismiss:r,isOpen:c}=e,{isSmall:u}=(0,h.kC)(),v=null!==(i=null==s?void 0:null===(n=s.token)||void 0===n?void 0:n.owner)&&void 0!==i?i:void 0,f=null==s?void 0:null===(t=s.token)||void 0===t?void 0:null===(l=t.blockchain)||void 0===l?void 0:l.id,m=!(0,O.U3)(v,o,f)&&c;return(0,a.jsx)(K.L,{hasCloseButton:!0,onDismiss:r,isOpen:!!m,title:(0,a.jsx)(d.x,{langKey:"nft:wallet:web3WalletCheckDialog:modalTitle"}),ariaLabel:"web3-wallet-check-dialog",className:P()({[z().mobileDialog]:u}),children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:P()("flex justify-center relative",z().avatarHolder),children:(0,a.jsxs)("div",{className:P()(z().avatar),children:["Solana"===f?(0,a.jsx)("img",{src:R.Z,className:z().phantomIcon}):(0,a.jsx)(a.Fragment,{children:v&&(0,a.jsx)(U.k,{address:v,diameter:70,blockchain:f})}),(0,a.jsx)("span",{className:P()(z().check),children:f?(0,a.jsx)(L.m,{className:P()(z().crypton),asset:O.js[f],circle:!0,color:!0}):null})]})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("p",{className:P()("caption-2",z().title),children:(0,a.jsx)(B.cC,{i18nKey:"nft:wallet:web3WalletCheckDialog:title",values:{address:(0,O.FP)(v,f)}})})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("p",{className:P()("text-N300 text-center",z().content),children:(0,a.jsx)(d.x,{langKey:"nft:wallet:web3WalletCheckDialog:description"})})}),(0,a.jsx)("div",{children:(0,a.jsx)(S.T,{buttonSize:"large",className:"mt6",confirmButtonText:(0,a.jsx)(d.x,{langKey:"general:Continue"}),onConfirm:r})})]})})};var Q=t(8100),Y=t(8402),G=t(53560),$=t(44801),J=t(18546);let q={[u.fX.Ethereum]:{name:"Ethereum",ticker:"ETH"},[u.fX.Polygon]:{name:"Polygon",ticker:"MATIC"},[u.fX.Solana]:{name:"Solana",ticker:"SOL"}};function ee(e){var n,t,f,y,k,g;let{onDepositComplete:b,onReset:j,nftAsset:C}=e,N=(0,$.L)(),_=(0,c.W)(),w=x(),T=(0,h.CA)(),{krakenDapp:W}=(0,v.N)(),{triggerAlert:S}=(0,r.B)(),{tfaSettings:K}=(0,J.V5)(u.gQ.Funds),{findDepositMethod:E}=(0,p.x)(),I=(0,l.useMemo)(()=>{var e;return q[null!==(k=null==C?void 0:null===(e=C.token)||void 0===e?void 0:e.blockchain.id)&&void 0!==k?k:"Ethereum"]},[null==C?void 0:null===(n=C.token)||void 0===n?void 0:n.blockchain.id]),P=E(I.name),[B,L]=(0,l.useState)(!1),[H,M]=(0,l.useState)(!1),[R,U]=(0,l.useState)(!1),[V,z]=(0,l.useState)(!1),[ee,en]=(0,l.useState)(!1),[et,ea]=(0,l.useState)(null==P?void 0:null===(t=P.information)||void 0===t?void 0:t[0]),{data:el}=function(e,n,t){let a=(0,c.W)(),i=(null==e?void 0:e.vendor)||"QuickNode",s=void 0!==t?t:"vendorToken/".concat(i),{data:o,mutate:r,...d}=(0,Q.ZP)(()=>s,async()=>{let n=await a.nft.vendorToken({vendor:i,...e});return n.data.result},{...Y.H});return(0,l.useEffect)(()=>{if(o&&new Date(o.expiry).getTime()>Date.now()){let e=setTimeout(()=>{r(e=>e,!0)},new Date(o.expiry).getTime()-Date.now());return()=>{clearTimeout(e)}}},[o]),{...d,data:o}}(),ei=null==W?void 0:W.findWalletAddress(null!==(g=null==C?void 0:null===(f=C.token)||void 0===f?void 0:f.owner)&&void 0!==g?g:""),{network:{[u.fX.Solana]:es}}=(0,m.Rh)(),eo=(0,l.useMemo)(()=>ei&&Number(null==W?void 0:W.getChainId(ei.type)),[ei,W]);(0,l.useEffect)(()=>{var e;let n=null==P?void 0:null===(e=P.information)||void 0===e?void 0:e[0];n&&ea(n)},[null==P?void 0:P.information]);let er=(0,l.useCallback)(()=>{L(!1),M(!1),en(!1),U(!1),z(!1),null==j||j()},[j]),ed=(0,l.useCallback)(async(e,n)=>(await i.nh.findProgramAddress([e.toBuffer(),s.H_.toBuffer(),n.toBuffer()],s._u))[0],[]),ec=null==C?void 0:C.token,eu=(0,l.useCallback)(async()=>{if(!ei||!C||!(null==et?void 0:et.address))return;let e=ei.address,n=ec&&"address"in ec?ec.address:"",t=et.address,a=await D(e,t,C),l=ei.type;await(null==W?void 0:W.depositNft({type:l,params:{from:e,to:n,data:a}},(null==ec?void 0:ec.blockchain.id)===u.fX.Polygon?G.V9.Polygon:G.V9.Ethereum))},[ei,null==et?void 0:et.address,W,C,ec]),ev=(0,l.useCallback)(async()=>{var e;if(!C||!(null==et?void 0:et.address))return;let n=(null==W?void 0:W.getConnectedAccount(G.Rj.Solana))||"",t=new i.nh(n);if(!(0,O.U3)(t.toString(),(null==ec?void 0:ec.owner)?null==ec?void 0:ec.owner:void 0,null==ec?void 0:ec.blockchain.id)){U(!1);return}let a=C.token,l=new i.nh(null!==(e=null==a?void 0:a.id)&&void 0!==e?e:""),s=new i.nh(et.address),o=await ed(s,l),r="";r=(null==T?void 0:T.sol_main)?null==T?void 0:T.sol_main:(0,i.Wf)({testnet:"devnet",mainnet:"mainnet-beta"}[es]);let d=(null==T?void 0:T.sol_main)?"Bearer ".concat(null==el?void 0:el.token):void 0;await(null==W?void 0:W.depositNft({type:G.Rj.Solana,params:{toAssociatedAddress:o,tokenAddress:l,toWalletAddress:s,fromWalletAddress:t,cluster:r,auth:d}},G.V9.Solana))},[null==et?void 0:et.address,ed,W,C,null==T?void 0:T.sol_main,es,null==ec?void 0:ec.blockchain.id,null==ec?void 0:ec.owner,null==el?void 0:el.token]),ef=(0,l.useCallback)(async()=>{if(ei&&C&&(null==et?void 0:et.address)){U(!0);try{var e;await((null==C?void 0:null===(e=C.token)||void 0===e?void 0:e.blockchain.id)===u.fX.Solana?ev():eu()),await _.nft.addWeb3Asset(C.id),S((0,a.jsx)(d.x,{langKey:"nft:wallet:Web3DepositSuccess"}),"success"),b&&b(),er()}catch(e){"Response data result is not defined"===e.message?(S((0,a.jsx)(d.x,{langKey:"nft:wallet:Web3DepositSuccess"}),"success"),b&&b(),er()):((0,o.Tb)(e),S((0,a.jsx)(d.x,{langKey:"nft:errors:wallet:Web3DepositError"}),"error"),er())}}},[ei,C,null==et?void 0:et.address,ev,eu,_.nft,S,b,er]),em=(0,l.useMemo)(()=>(0,h.Wb)(null==K?void 0:K.options),[K]),eh=(0,l.useCallback)(async e=>{if(et){M(!0);return}if(P&&P.name)try{en(!0);let n=await N(P.name,e);ea(n),M(!0)}catch(e){if((0,m.$l)(e)){L(!0),en(!1);return}S((0,a.jsx)(d.x,{langKey:e.message||"rpcerror:EGeneral:Internal error"}),"error")}finally{en(!1)}},[N,et,P,S]);return((0,l.useEffect)(()=>{K&&!em&&eh()},[eh,em,K]),w())?(0,a.jsxs)(a.Fragment,{children:[K&&K.type!==u.T2.None?(0,a.jsx)(F.$_,{hasError:B,isLoading:ee,isOpen:em&&!V,tfaMethod:K.type,onConfirm:eh,onDismiss:er,tfaType:u.gQ.Funds,clearError:()=>L(!1)}):null,C?(0,a.jsx)(A,{isOpen:H,isPending:R,nftAsset:C,onConfirm:ef,onDismiss:er,depositAddress:null==et?void 0:et.address}):null,C&&(null==C?void 0:null===(y=C.token)||void 0===y?void 0:y.blockchain.id)!==u.fX.Solana&&eo?(0,a.jsx)(X,{nftAsset:C,currentChainId:eo,onDismiss:er,isOpen:H}):null,C?(0,a.jsx)(Z,{nftAsset:C,currentWeb3Address:null==ei?void 0:ei.address,onDismiss:er,isOpen:H}):null]}):null}},44801:function(e,n,t){"use strict";t.d(n,{L:function(){return s}});var a=t(67294),l=t(91572),i=t(89866);let s=()=>{let e=(0,i.W)();return(0,a.useCallback)(async(n,t)=>{let a=await e.deposits.createDepositAddress({asset:"NFT",method:n,otp:"string"==typeof t?t:void 0,asset_class:l.ez.Nft},{csrf:{contextId:l.G8.Deposit}}),i={...a.data.result,is_new:!0};return i},[e.deposits])}},41671:function(e){e.exports={title:"NftWeb3ChainCheckDialog_title__87IlZ",content:"NftWeb3ChainCheckDialog_content__gek51",avatarHolder:"NftWeb3ChainCheckDialog_avatarHolder__1trNe",avatar:"NftWeb3ChainCheckDialog_avatar__D9xw9",crypton:"NftWeb3ChainCheckDialog_crypton__esPAw",phantomIcon:"NftWeb3ChainCheckDialog_phantomIcon__SN6mT"}},23883:function(e){e.exports={mobileDialog:"NftWeb3WalletCheckDialog_mobileDialog__u_EAd",title:"NftWeb3WalletCheckDialog_title__D2Nb6",content:"NftWeb3WalletCheckDialog_content__ViXrP",avatarHolder:"NftWeb3WalletCheckDialog_avatarHolder__AKsnV",avatar:"NftWeb3WalletCheckDialog_avatar__BDjjL",check:"NftWeb3WalletCheckDialog_check__Dg5wg",crypton:"NftWeb3WalletCheckDialog_crypton__jEucT",phantomIcon:"NftWeb3WalletCheckDialog_phantomIcon___LYMA"}},91031:function(e,n){"use strict";n.Z="/nft/_next/static/chunks/images/20a54131cf9f4cc78c720cd8262c992c.png"},88677:function(){}}]);